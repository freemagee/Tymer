function init(){function e(e,n,t){var a,i=e.val();"plus"===n?(a=1*i+1,"min"===t?59>=i?(e.val(o(a)),60>=a&&$(".number.mins").text(o(a))):s(1):"sec"===t&&58>=i&&(e.val(o(a)),59>=a&&$(".number.secs").text(o(a)))):"minus"===n&&(a=i-1,i>=1&&(e.val(o(a)),a>=0&&$(".number."+t+"s").text(o(a))))}function n(){$(".message-text").text("Tymer Completed"),$(".message").addClass("complete").addClass("show"),a($(".message")),r(),t()}function t(){$(".tymer").removeClass("hasCountdown").removeClass("paused").countdown("pause"),$(".number.mins").text("00"),$(".number.secs").text("00"),$(".js-minutes").val("00"),$(".js-seconds").val("00"),$(".tymer-set").removeClass("inactive"),$(".tymer-clear").removeClass("active"),$(".js-pause").text("Pause").data("state",!1)}function s(e){var n="There has been a technical error with Tymer. Sorry for the inconvenience.";0===e?n="Please enter a time. Format [MM:SS].":1===e&&(n="Maximum Tymer is 60 minutes"),$(".message-text").text(n),$(".message").addClass("error").addClass("show"),a($(".message")),clearInterval(c)}function a(e){$(".dismiss").click(function(n){e.attr("class","message"),e.find(".message-text").empty(),u(),n.preventDefault()}),$("html").on("keyup",function(n){27===n.keyCode&&(e.attr("class","message"),e.find(".message-text").empty(),u())})}function o(e){var n;return n=10>e?("0"+e).slice(-2):e}function i(e,n){var t=parseInt(e,10),s=parseInt(n,10);return 60>=t&&t>=1?!0:0===t&&s>0?!0:!1}function r(){$('<audio id="alert-sound"></audio>').prependTo("body"),$("#alert-sound").attr({autoplay:!0,loop:!0}),$('<source src="library/audio/alert.wav" type="audio/wav"><source src="library/audio/alert.mp3" type="audio/mp3">').prependTo("#alert-sound")}function u(){$("#alert-sound").length>0&&$("#alert-sound").remove()}function l(){function e(){var e;return e=o>u?Math.floor(95*(r/100)):4*u+10*(u/100)>a?o*n:i,output='<style type="text/css" id="fit">',output+=".tymer { height : "+s+"px } ",output+=".tymer span { line-height : "+s+"px; ",output+="font-size: "+e+"px; }",output+="</style>"}var n=1.71,t=$(".tymer-set").height(),s=window.innerHeight-t,a=window.innerWidth,o=Math.floor(24*(a/100)),i=parseFloat($(".tymer span").css("font-size")),r=s,u=Math.floor(r/n),l=e();$("#fit").length>0&&$("#fit").remove(),$(l).appendTo("head")}var c;$(".tymer").addClass("active"),$(".tymer-controls").addClass("active"),$(".js-help").on("click",function(){var e='<img src="library/img/logo-icon.png" alt="Tymer logo" class="logo-icon"><h1>Simple Free Online Timer</h1><p>Tymer is a mobile optimised countdown timer. Whether you are cooking, exercising or practising the pomodoro technique, Tymer is for you.</p><ul><li>Supports a countdown up to one hour - [MM:SS]</li><li>Click anywhere to start countdown</li><li>Alarm sounds when Tymer has completed (PC/MAC only)</li></ul><p>More info about <a href="why.html">Tymer</a>. Built by <a href="http://neilmagee.com">Neil Magee</a>.</p>';$(".message-text").html(e),$(".message").addClass("help-panel").addClass("show"),a($(".message"))}),$(".js-minutes").on("change",function(){var e=o($(this).val());clearInterval(c),59>=e?$(".number.mins").text(e):60==e?($(".number.mins").text(e),$(".number.secs").text("00")):(s(1),$(this).val(60),$(".number.mins").text(60))}),$(".js-seconds").on("change",function(){var e=o($(this).val()),n=o($(".js-minutes").val());clearInterval(c),59>=e?60!=n?$(".number.secs").text(e):(s(1),$(this).val(0),$(".number.secs").text("00")):($(this).val(0),$(".number.secs").text("00"))}),$(".tymer").on("click",function(){var e=$(this).hasClass("hasCountdown");if(e){var t=$(this).data("state");t=!t,t?$(this).countdown("pause").addClass("paused"):$(this).countdown("resume").removeClass("paused"),$(this).data("state",t)}else{var a=$(".js-minutes").val(),o=$(".js-seconds").val();if(i(a,o)){var r=60*a+1*o;$(".tymer-set").addClass("inactive"),$(".tymer-clear").addClass("active"),$(".tymer").countdown({until:r,format:"MS",compact:!0,layout:'<span class="number mins">{mnn}</span><span class="sep"></span><span class="number secs">{snn}</span>',onExpiry:n})}else s(0)}return!1}),$(".js-clear").on("click",function(){return t(),!1}),$(".js-mins-minus").on("mousedown",function(){var n=$(".js-minutes");e(n,"minus","min"),c=setInterval(function(){e(n,"minus","min")},300)}).on("mouseup",function(){clearInterval(c)}),$(".js-mins-plus").on("mousedown",function(){var n=$(".js-minutes");e(n,"plus","min"),c=setInterval(function(){e(n,"plus","min")},300)}).on("mouseup",function(){clearInterval(c)}),$(".js-secs-minus").on("mousedown",function(){var n=$(".js-seconds");e(n,"minus","sec"),c=setInterval(function(){e(n,"minus","sec")},300)}).on("mouseup",function(){clearInterval(c)}),$(".js-secs-plus").on("mousedown",function(){var n=$(".js-seconds");e(n,"plus","sec"),c=setInterval(function(){e(n,"plus","sec")},300)}).on("mouseup",function(){clearInterval(c)}),l(),$(window).on("resize",function(){l()})}$(document).ready(function(){function e(){var e=document.createElement("script");e.src="library/js/vendor/jquery.countdown.min.js",document.body.appendChild(e),init()}window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent?window.attachEvent("onload",e):window.onload=e});